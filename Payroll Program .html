<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Team Payroll System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .commission-badge {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .print-only {
            display: none;
        }
        
        @media print {
            .no-print {
                display: none !important;
            }
            .print-only {
                display: block !important;
            }
            body {
                background: white !important;
            }
        }
    </style>
</head>
<body class="min-h-screen py-8 px-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="flex items-center justify-center mb-4">
                <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center mr-3">
                    <i class="fas fa-chart-line text-white text-xl"></i>
                </div>
                <h1 class="text-3xl font-bold text-gray-800">Sales Team Payroll System</h1>
            </div>
            <p class="text-gray-600">Manage commissions and payroll for your sales team</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <!-- Input Form -->
            <div class="lg:col-span-2">
                <div class="glass-effect rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">
                        <i class="fas fa-user-plus text-blue-600 mr-2"></i>
                        Add Sales Record
                    </h2>
                    
                    <form id="payrollForm" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Salesperson Name</label>
                                <input type="text" id="salespersonName" required 
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="Enter full name">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Employee ID</label>
                                <input type="text" id="employeeId" 
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="Optional ID">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Sales Amount ($)</label>
                                <input type="number" id="salesAmount" required min="0" step="0.01"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="0.00">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Commission Rate (%)</label>
                                <input type="number" id="commissionRate" required min="0" max="100" step="0.1"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="10.0" value="10">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Base Salary ($)</label>
                                <input type="number" id="baseSalary" required min="0" step="0.01"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="0.00" value="2000">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Sales Date</label>
                                <input type="date" id="salesDate" required
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Payment Date</label>
                                <input type="date" id="paymentDate" required
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Additional Notes</label>
                            <textarea id="notes" rows="2"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="Any additional information..."></textarea>
                        </div>

                        <button type="submit" 
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 flex items-center justify-center">
                            <i class="fas fa-calculator mr-2"></i>
                            Calculate Payroll
                        </button>
                    </form>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="lg:col-span-1">
                <div class="glass-effect rounded-xl shadow-lg p-6 h-full">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">
                        <i class="fas fa-chart-pie text-green-600 mr-2"></i>
                        Payroll Summary
                    </h2>
                    
                    <div class="space-y-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-medium text-blue-800">Total Sales</span>
                                <span class="text-2xl font-bold text-blue-800" id="totalSales">$0.00</span>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg">
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-medium text-green-800">Total Commissions</span>
                                <span class="text-2xl font-bold text-green-800" id="totalCommissions">$0.00</span>
                            </div>
                        </div>
                        
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-medium text-purple-800">Total Paid</span>
                                <span class="text-2xl font-bold text-purple-800" id="totalPaid">$0.00</span>
                            </div>
                        </div>
                        
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-medium text-orange-800">Records Processed</span>
                                <span class="text-2xl font-bold text-orange-800" id="recordsCount">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="glass-effect rounded-xl shadow-lg p-6 mb-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-semibold text-gray-800">
                    <i class="fas fa-file-invoice-dollar text-purple-600 mr-2"></i>
                    Payroll Calculation Results
                </h2>
                <div class="flex space-x-2">
                    <button id="printBtn" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm no-print">
                        <i class="fas fa-print mr-1"></i> Print
                    </button>
                    <button id="clearBtn" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm no-print">
                        <i class="fas fa-trash mr-1"></i> Clear All
                    </button>
                </div>
            </div>

            <div id="resultsContainer" class="space-y-4">
                <div class="text-center py-12 text-gray-500">
                    <i class="fas fa-calculator text-4xl mb-4"></i>
                    <p>No payroll calculations yet. Fill out the form to get started.</p>
                </div>
            </div>
        </div>

        <!-- Print Header (Hidden until print) -->
        <div class="print-only text-center mb-6">
            <h1 class="text-2xl font-bold">Sales Team Payroll Report</h1>
            <p class="text-gray-600">Generated on: <span id="printDate"></span></p>
        </div>
    </div>

    <script>
        // Initialize date inputs
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('salesDate').value = today;
            document.getElementById('paymentDate').value = today;
            
            // Set print date
            document.getElementById('printDate').textContent = new Date().toLocaleDateString();
            
            // Load saved data
            loadSavedData();
        });

        // Form submission
        document.getElementById('payrollForm').addEventListener('submit', function(e) {
            e.preventDefault();
            calculatePayroll();
        });

        // Print functionality
        document.getElementById('printBtn').addEventListener('click', function() {
            window.print();
        });

        // Clear all data
        document.getElementById('clearBtn').addEventListener('click', function() {
            if (confirm('Are you sure you want to clear all payroll data? This cannot be undone.')) {
                localStorage.removeItem('payrollRecords');
                localStorage.removeItem('payrollStats');
                document.getElementById('resultsContainer').innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <i class="fas fa-calculator text-4xl mb-4"></i>
                        <p>No payroll calculations yet. Fill out the form to get started.</p>
                    </div>
                `;
                updateStats({ totalSales: 0, totalCommissions: 0, totalPaid: 0, recordsCount: 0 });
            }
        });

        function calculatePayroll() {
            const name = document.getElementById('salespersonName').value;
            const employeeId = document.getElementById('employeeId').value;
            const salesAmount = parseFloat(document.getElementById('salesAmount').value);
            const commissionRate = parseFloat(document.getElementById('commissionRate').value);
            const baseSalary = parseFloat(document.getElementById('baseSalary').value);
            const salesDate = document.getElementById('salesDate').value;
            const paymentDate = document.getElementById('paymentDate').value;
            const notes = document.getElementById('notes').value;

            // Calculations
            const commission = (salesAmount * commissionRate) / 100;
            const totalPay = baseSalary + commission;
            const commissionPercentage = commissionRate;

            // Create record
            const record = {
                id: Date.now(),
                name,
                employeeId,
                salesAmount,
                commissionRate,
                baseSalary,
                commission,
                totalPay,
                salesDate,
                paymentDate,
                notes,
                timestamp: new Date().toISOString()
            };

            // Save record
            saveRecord(record);
            
            // Display result
            displayResult(record);
            
            // Update stats
            updateStatsFromRecords();
            
            // Clear form
            document.getElementById('payrollForm').reset();
            document.getElementById('salesDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('paymentDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('commissionRate').value = "10";
            document.getElementById('baseSalary').value = "2000";
        }

        function displayResult(record) {
            const resultsContainer = document.getElementById('resultsContainer');
            
            // Remove empty state if it exists
            if (resultsContainer.querySelector('.text-center')) {
                resultsContainer.innerHTML = '';
            }

            const resultElement = document.createElement('div');
            resultElement.className = 'bg-white border-l-4 border-blue-500 rounded-lg p-4 shadow-sm';
            resultElement.innerHTML = `
                <div class="flex justify-between items-start mb-3">
                    <div>
                        <h3 class="font-semibold text-lg text-gray-800">${record.name}</h3>
                        ${record.employeeId ? `<p class="text-sm text-gray-600">ID: ${record.employeeId}</p>` : ''}
                    </div>
                    <span class="text-xs text-gray-500">${new Date(record.salesDate).toLocaleDateString()}</span>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-3">
                    <div class="text-center">
                        <p class="text-sm text-gray-600">Sales Amount</p>
                        <p class="font-bold text-blue-600">$${record.salesAmount.toFixed(2)}</p>
                    </div>
                    <div class="text-center">
                        <p class="text-sm text-gray-600">Commission</p>
                        <p class="font-bold text-green-600">$${record.commission.toFixed(2)}</p>
                        <p class="text-xs text-gray-500">(${record.commissionRate}%)</p>
                    </div>
                    <div class="text-center">
                        <p class="text-sm text-gray-600">Base Salary</p>
                        <p class="font-bold text-purple-600">$${record.baseSalary.toFixed(2)}</p>
                    </div>
                    <div class="text-center commission-badge">
                        <p class="text-sm text-gray-600">Total Pay</p>
                        <p class="font-bold text-orange-600 text-xl">$${record.totalPay.toFixed(2)}</p>
                    </div>
                </div>
                
                ${record.notes ? `
                <div class="bg-gray-50 p-3 rounded-lg mb-3">
                    <p class="text-sm text-gray-700"><strong>Notes:</strong> ${record.notes}</p>
                </div>
                ` : ''}
                
                <div class="flex justify-between items-center text-xs text-gray-500">
                    <span>Payment due: ${new Date(record.paymentDate).toLocaleDateString()}</span>
                    <button onclick="deleteRecord(${record.id})" class="text-red-600 hover:text-red-800 no-print">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            `;

            resultsContainer.prepend(resultElement);
        }

        function saveRecord(record) {
            let records = JSON.parse(localStorage.getItem('payrollRecords') || '[]');
            records.push(record);
            localStorage.setItem('payrollRecords', JSON.stringify(records));
        }

        function loadSavedData() {
            const records = JSON.parse(localStorage.getItem('payrollRecords') || '[]');
            const stats = JSON.parse(localStorage.getItem('payrollStats') || 'null');
            
            if (records.length > 0) {
                document.getElementById('resultsContainer').innerHTML = '';
                records.forEach(record => displayResult(record));
                updateStatsFromRecords();
            }
            
            if (stats) {
                updateStats(stats);
            }
        }

        function updateStatsFromRecords() {
            const records = JSON.parse(localStorage.getItem('payrollRecords') || '[]');
            
            const stats = {
                totalSales: records.reduce((sum, record) => sum + record.salesAmount, 0),
                totalCommissions: records.reduce((sum, record) => sum + record.commission, 0),
                totalPaid: records.reduce((sum, record) => sum + record.totalPay, 0),
                recordsCount: records.length
            };
            
            localStorage.setItem('payrollStats', JSON.stringify(stats));
            updateStats(stats);
        }

        function updateStats(stats) {
            document.getElementById('totalSales').textContent = `$${stats.totalSales.toFixed(2)}`;
            document.getElementById('totalCommissions').textContent = `$${stats.totalCommissions.toFixed(2)}`;
            document.getElementById('totalPaid').textContent = `$${stats.totalPaid.toFixed(2)}`;
            document.getElementById('recordsCount').textContent = stats.recordsCount;
        }

        function deleteRecord(id) {
            let records = JSON.parse(localStorage.getItem('payrollRecords') || '[]');
            records = records.filter(record => record.id !== id);
            localStorage.setItem('payrollRecords', JSON.stringify(records));
            
            // Reload the display
            document.getElementById('resultsContainer').innerHTML = '';
            if (records.length > 0) {
                records.forEach(record => displayResult(record));
            } else {
                document.getElementById('resultsContainer').innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <i class="fas fa-calculator text-4xl mb-4"></i>
                        <p>No payroll calculations yet. Fill out the form to get started.</p>
                    </div>
                `;
            }
            
            updateStatsFromRecords();
        }
    </script>
</body>
</html>

